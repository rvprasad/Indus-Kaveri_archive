<project name="bfa" default="build" basedir=".">

<property name="bin" value="bin"/>
<property name="dist" value="dist"/>
<property name="build" value="${dist}/classes"/>
<property name="design" value="design"/>
<property name="docs" value="docs"/>
<property name="gui" value="GUI"/>
<property name="src" value="edu/ksu/cis/bandera/bfa"/>
<property name="package" value="edu.ksu.cis.bandera.bfa"/>
<property name="log4j" value="log4j.properties"/>
<property name="jdklink" value="http://boss/docs/java/jdk-1.3.1/api/"/>
<property name="sootlink" value="http://boss/docs/compilers/soot-0.x/"/>


<target name="init">
    <tstamp/>
</target>

<target name="build" depends="init">
    <mkdir dir="${build}"/>
    <javac srcdir="${src}" destdir="${build}" excludes="log4j.properties, .sem*" 
           debug="on"/>
    <copy file="${src}/${log4j}" tofile="${build}/${log4j}"/>
</target>

<target name="docs">
    <mkdir dir="${docs}/javadocs"/>
    <javadoc sourcepath="${basedir}" packagenames="${package}.*" 
             destdir="${docs}/javadocs" access="package" use="true" 
             author="true">
             <link href="${sootlink}"/>
             <link href="${jdklink}"/>
    </javadoc>
</target>

<target name="dist" depends="build, docs">
   <antcall target="backup"/> 
</target>

<target name="backup" depends="init">
    <mkdir dir="${dist}"/>
    <property name="filename" value="${dist}/${ant.project.name}-${DSTAMP}"/>
    <jar jarfile="${filename}.jar" basedir="${build}"/>
    <tar tarfile="${filename}.tar" basedir="${basedir}" 
         excludes="${gui}/*.class, ${gui}/*_.*, **/\..*"
         includes="${gui}/*.py, ${src}/, ${filename}.jar, ${design}/, ${docs}/, ${docs}/README.TXT, ${bin}/, build.xml"/>
    <gzip src="${filename}.tar" zipfile="${filename}.tgz"/>
</target>

<target name="clean">
    <delete dir="${build}"/>
    <delete dir="${docs}"/>
</target>

</project>
